version: "3.6"

services:
  harvest_tweets_streaming:
    build: ./harvest-tweets-streaming
    image: 127.0.0.1:5000/harvest-tweets-streaming
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ_USER=rabbitmq
      - RABBITMQ_PASS=jerseygrapefruitpetrolcalcium
      - PYTHONUNBUFFERED=1
      - CONSUMER_KEY=gHLBdGbr6BGAsORWeCUDnjVK8
      - CONSUMER_SECRET=OhcP7O0AdfFAgLyb1KfNjg4KCQ90Pjh7zCGwnv1tAVvOUUaXQL
      - ACCESS_TOKEN=775515873595359232-e5H9Fo5B4Kaz0i83L1oWIp86HuNWIf7
      - ACCESS_TOKEN_SECRET=q16pw33BjTyfxrosoJiCycBqNm81el3ip2F9mU4oo5RDa
      - COORDINATORS=[130.096982, -24.551835, 153.369916, -10.512868]


  harvest_tweets_search:
    build: ./harvest-tweets-search
    image: 127.0.0.1:5000/harvest-tweets-search
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ_USER=rabbitmq
      - RABBITMQ_PASS=jerseygrapefruitpetrolcalcium
      - PYTHONUNBUFFERED=1
      - CONSUMER_KEY=gHLBdGbr6BGAsORWeCUDnjVK8
      - CONSUMER_SECRET=OhcP7O0AdfFAgLyb1KfNjg4KCQ90Pjh7zCGwnv1tAVvOUUaXQL
      - ACCESS_TOKEN=775515873595359232-e5H9Fo5B4Kaz0i83L1oWIp86HuNWIf7
      - ACCESS_TOKEN_SECRET=q16pw33BjTyfxrosoJiCycBqNm81el3ip2F9mU4oo5RDa
      - SEARCH_RANGE=-24.24,133.416667,1000km


  harvest_tweets_rich_urls:
    build: ./harvest-tweets-rich-urls
    image: 127.0.0.1:5000/harvest-tweets-rich-uls
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ_USER=rabbitmq
      - RABBITMQ_PASS=jerseygrapefruitpetrolcalcium
      - PYTHONUNBUFFERED=1
      - HARVEST_LIMIT=50


  harvest_tweets_files:
    build: ./harvest-tweets-files
    image: 127.0.0.1:5000/harvest-tweets-files
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ_USER=rabbitmq
      - RABBITMQ_PASS=jerseygrapefruitpetrolcalcium
      - PYTHONUNBUFFERED=1


  process_tweets:
    build: ./process-tweets
    image: 127.0.0.1:5000/process-tweets
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ_USER=rabbitmq
      - RABBITMQ_PASS=jerseygrapefruitpetrolcalcium
      - PYTHONUNBUFFERED=1
      - POLITICS_KEY_WORDS=#auspol,#LNP,#ALP,#Greens,#Labor,#Liberal,#Liberals,#Libs,#BillShorten,#Shorten,#MalcolmTurnbull,#Turnbull,#LNPfail
      - JUNK_FOOD_KEY_WORDS_FILE=junkfood.txt


  insert_database_tweets:
    build: ./insert-database-tweets
    image: 127.0.0.1:5000/insert-database-tweets
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ_USER=rabbitmq
      - RABBITMQ_PASS=jerseygrapefruitpetrolcalcium
      - COUCHDB_USER=admin
      - COUCHDB_PASSWORD=admin
      - PYTHONUNBUFFERED=1


  rabbitmq:
    image: 127.0.0.1:5000/rabbitmq:3-management-alpine
    ports:
      - "15672:15672"
    environment:
      - RABBITMQ_ERLANG_COOKIE=QYJHJRUWSOCYIBEGEQJI
      - RABBITMQ_DEFAULT_USER=rabbitmq
      - RABBITMQ_DEFAULT_PASS=jerseygrapefruitpetrolcalcium
